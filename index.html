<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For Jewel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html, body {
    margin: 0;
    padding: 0;
    background: black;
    overflow: hidden;
    width: 100%;
    height: 100%;
    font-family: 'Montserrat', sans-serif;
}

/* ===== COUNTDOWN ===== */
#countdown {
    position: absolute;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: 6vw;
    font-weight: bold;
    text-shadow: 0 0 30px white;
}

/* ===== GIFT ===== */
#gift {
    display: none;
    position: absolute;
    inset: 0;
    justify-content: center;
    align-items: center;
    cursor: pointer;
}

#gift img {
    width: 180px;
    animation: pulse 1.5s infinite alternate;
}

@keyframes pulse {
    from { transform: scale(1); }
    to { transform: scale(1.08); }
}

/* ===== LIGHT ===== */
#light {
    display: none;
    position: absolute;
    inset: 0;
    background: white;
    animation: fadeInOut 5s ease-in-out forwards;
    z-index: 10;
}

@keyframes fadeInOut {
    0% { opacity: 0; }
    50% { opacity: 1; }
    100% { opacity: 0; }
}

/* ===== VIDEO ===== */
#video {
    display: none;
    position: absolute;
    inset: 0;
    background: black;
    z-index: 5;
}

/* ซ่อน UI แต่ไม่กินขอบ */
#player {
    width: 108%;
    height: 108%;
    transform: translate(-4%, -4%);
}
</style>
</head>

<body>

<div id="countdown"></div>

<div id="gift">
    <img src="shine-old-wooden-chest-realistic-composition-transparent-background-with-vintage-coffer-sparkling-particles.png">
</div>

<div id="light"></div>

<div id="video">
    <div id="player"></div>
</div>

<audio id="sfx" src="Undertale-Exitsoundeffect.mp3"></audio>

<script src="https://www.youtube.com/iframe_api"></script>

<script>
// ===== TARGET TIME =====
const targetDate = new Date("January 1, 2025 00:00:00 GMT+0000");

const countdown = document.getElementById("countdown");
const gift = document.getElementById("gift");
const light = document.getElementById("light");
const videoBox = document.getElementById("video");
const sfx = document.getElementById("sfx");

let player;

// ===== COUNTDOWN =====
function updateCountdown() {
    const diff = targetDate - Date.now();
    if (diff <= 0) {
        countdown.style.display = "none";
        gift.style.display = "flex";
        clearInterval(timer);
        return;
    }
    const d = Math.floor(diff / 86400000);
    const h = Math.floor(diff / 3600000) % 24;
    const m = Math.floor(diff / 60000) % 60;
    const s = Math.floor(diff / 1000) % 60;
    countdown.textContent = `${d}d ${h}h ${m}m ${s}s`;
}
const timer = setInterval(updateCountdown, 1000);
updateCountdown();

// ===== YouTube API =====
function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
        videoId: 'DxMY4GUE_ms',
        playerVars: {
            autoplay: 1,
            controls: 0,
            rel: 0,
            modestbranding: 1,
            playsinline: 1,
            mute: 1
        },
        events: {
            onReady: e => e.target.playVideo()
        }
    });
}

// ===== CLICK GIFT =====
gift.addEventListener("click", () => {
    gift.style.display = "none";

    sfx.currentTime = 0;
    sfx.play();

    light.style.display = "block";

    setTimeout(() => {
        light.style.display = "none";
        videoBox.style.display = "block";
    }, 5000);
});

// ===== CLICK VIDEO = เปิดเสียง =====
videoBox.addEventListener("click", () => {
    if (player && player.isMuted()) {
        player.unMute();
        player.setVolume(100);
    }
});
</script>

</body>
</html>
